CREATE DATABASE Bbiblioteca;
USE Bbiblioteca;

CREATE TABLE TEmpleado(
idEmpleado INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
dni VARCHAR(9) UNIQUE NOT NULL,
nombre VARCHAR(60) NOT NULL,
apellidos VARCHAR(120) NOT NULL,
telefono VARCHAR(13) NOT NULL,
correo VARCHAR(60));

CREATE TABLE TCliente(
idCliente INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
dni VARCHAR(9) NOT NULL UNIQUE,
nombre VARCHAR(60) NOT NULL,
apellidos VARCHAR(120) NOT NULL,
telefono VARCHAR(13) NOT NULL,
correo VARCHAR(60));

CREATE TABLE TLibro(
idLibro INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
isbn VARCHAR(13) NOT NULL UNIQUE,
nombre VARCHAR(60) NOT NULL,
editorial VARCHAR(60) NOT NULL,
idAutor INT NOT NULL);

CREATE TABLE TAutor(
idAutor INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nombre VARCHAR(60) NOT NULL,
apellidos VARCHAR(60),
periodo VARCHAR(60));
ALTER TABLE TLibro ADD FOREIGN KEY (idAutor) REFERENCES TAutor (idAutor); 

CREATE TABLE TPrestamo(
idPrestamo INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
idEmpleado INT NOT NULL,
idCliente INT NOT NULL,
idLibro INT NOT NULL,
fecha_inicio DATE NOT NULL,
fecha_fin DATE NOT NULL);

ALTER TABLE TPrestamo ADD FOREIGN KEY(idEmpleado) REFERENCES TEmpleado(idEmpleado);
ALTER TABLE TPrestamo ADD FOREIGN KEY(idCliente) REFERENCES TCliente(idCliente);
ALTER TABLE TPrestamo ADD FOREIGN KEY(idLibro) REFERENCES TLibro(idLibro);
